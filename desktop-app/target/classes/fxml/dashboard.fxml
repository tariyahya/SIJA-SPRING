<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Accordion?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ProgressIndicator?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TitledPane?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane styleClass="root" stylesheets="@../css/dashboard.css" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.smk.presensi.desktop.controller.DashboardController">

    <!-- Top Bar -->
    <top>
        <HBox alignment="CENTER_LEFT" spacing="10" styleClass="top-bar">
            <padding>
                <Insets bottom="10" left="20" right="20" top="10" />
            </padding>
            
            <Label styleClass="title" text="SIM Sekolah SMKN 1 Punggelan">
                <font>
                    <Font name="System Bold" size="18" />
                </font>
            </Label>
            
            <Region HBox.hgrow="ALWAYS" />
            
            <Label fx:id="connectionStatusLabel" styleClass="connection-status" text="ðŸ”´ Disconnected" />
            <Label fx:id="userLabel" styleClass="user-label" text="ðŸ‘¤ User" />
            
            <Button fx:id="refreshButton" styleClass="btn-primary" text="âŸ³" />
            <Button fx:id="logoutButton" onAction="#handleLogout" styleClass="btn-danger" text="ðŸšª Logout" />
            
            <ProgressIndicator fx:id="loadingIndicator" prefHeight="20" prefWidth="20" visible="false" />
        </HBox>
    </top>

    <!-- Sidebar -->
    <left>
        <VBox prefWidth="250" styleClass="sidebar">
            <ScrollPane fitToWidth="true" hbarPolicy="NEVER" style="-fx-background-color: transparent;">
                <content>
                    <VBox spacing="5">
                        <Button maxWidth="Infinity" onAction="#handleDashboardHome" styleClass="menu-button" text="ðŸ  Dashboard Utama" />
                        
                        <Accordion>
                            <panes>
                                <TitledPane text="Data Master">
                                    <content>
                                        <VBox spacing="5">
                                            <Button maxWidth="Infinity" onAction="#handleTahunAjaranManagement" styleClass="submenu-button" text="Tahun Ajaran &amp; Semester" />
                                            <Button maxWidth="Infinity" onAction="#handleSiswaManagement" styleClass="submenu-button" text="Data Siswa" />
                                            <Button maxWidth="Infinity" onAction="#handleGuruManagement" styleClass="submenu-button" text="Data Guru &amp; Karyawan" />
                                            <Button maxWidth="Infinity" onAction="#handleKelasManagement" styleClass="submenu-button" text="Data Kelas" />
                                            <Button maxWidth="Infinity" onAction="#handleJurusanManagement" styleClass="submenu-button" text="Data Jurusan" />
                                            <Button maxWidth="Infinity" onAction="#handleDudiManagement" styleClass="submenu-button" text="Data DUDI (PKL)" />
                                            <Button maxWidth="Infinity" onAction="#handleOfficeManagement" styleClass="submenu-button" text="Data Instansi/Office" />
                                        </VBox>
                                    </content>
                                </TitledPane>
                                
                                <TitledPane text="Akademik &amp; Jadwal">
                                    <content>
                                        <VBox spacing="5">
                                            <Button maxWidth="Infinity" onAction="#handleMapelManagement" styleClass="submenu-button" text="Mata Pelajaran" />
                                            <Button maxWidth="Infinity" onAction="#handleJadwalManagement" styleClass="submenu-button" text="Jadwal Mengajar" />
                                            <Button maxWidth="Infinity" onAction="#handleUlanganHarian" styleClass="submenu-button" text="Penilaian UH" />
                                            <Button maxWidth="Infinity" onAction="#handleQuizManagement" styleClass="submenu-button" text="Manajemen Quiz" />
                                        </VBox>
                                    </content>
                                </TitledPane>
                                
                                <TitledPane text="Presensi">
                                    <content>
                                        <VBox spacing="5">
                                            <Button maxWidth="Infinity" onAction="#handlePresensiManagement" styleClass="submenu-button" text="Presensi Siswa" />
                                            <Button maxWidth="Infinity" onAction="#handlePresensiRekap" styleClass="submenu-button" text="Rekap Presensi" />
                                            <Button maxWidth="Infinity" onAction="#handlePresensiGuru" styleClass="submenu-button" text="Presensi Guru" />
                                        </VBox>
                                    </content>
                                </TitledPane>
                                
                                <TitledPane text="PKL / Prakerin">
                                    <content>
                                        <VBox spacing="5">
                                            <Button maxWidth="Infinity" onAction="#handlePklPlacement" styleClass="submenu-button" text="Penempatan PKL" />
                                            <Button maxWidth="Infinity" onAction="#handlePklLog" styleClass="submenu-button" text="Monitoring Log" />
                                            <Button maxWidth="Infinity" onAction="#handlePklAssessment" styleClass="submenu-button" text="Penilaian PKL" />
                                        </VBox>
                                    </content>
                                </TitledPane>
                                
                                <TitledPane text="Kesiswaan">
                                    <content>
                                        <VBox spacing="5">
                                            <Button maxWidth="Infinity" onAction="#handlePelanggaran" styleClass="submenu-button" text="Pelanggaran Siswa" />
                                            <Button maxWidth="Infinity" onAction="#handlePrestasi" styleClass="submenu-button" text="Prestasi Siswa" />
                                        </VBox>
                                    </content>
                                </TitledPane>
                                
                                <TitledPane text="Sarpras &amp; Inventaris">
                                    <content>
                                        <VBox spacing="5">
                                            <Button maxWidth="Infinity" onAction="#handleInventaris" styleClass="submenu-button" text="Inventaris Barang" />
                                            <Button maxWidth="Infinity" onAction="#handlePeminjaman" styleClass="submenu-button" text="Peminjaman" />
                                        </VBox>
                                    </content>
                                </TitledPane>
                                
                                <TitledPane fx:id="keuanganPane" text="Keuangan">
                                    <content>
                                        <VBox spacing="5">
                                            <Button maxWidth="Infinity" onAction="#handlePembayaranMaster" styleClass="submenu-button" text="Master Pembayaran" />
                                            <Button maxWidth="Infinity" onAction="#handlePembayaranTransaksi" styleClass="submenu-button" text="Transaksi Pembayaran" />
                                            <Button maxWidth="Infinity" onAction="#handlePembayaranRekap" styleClass="submenu-button" text="Rekap Keuangan" />
                                        </VBox>
                                    </content>
                                </TitledPane>
                                
                                <TitledPane text="Utilitas Sistem">
                                    <content>
                                        <VBox spacing="5">
                                            <Button maxWidth="Infinity" onAction="#handleImportExport" styleClass="submenu-button" text="Import &amp; Export" />
                                            <Button maxWidth="Infinity" onAction="#handleUserManagement" styleClass="submenu-button" text="Manajemen User" />
                                            <Button fx:id="settingsMenuButton" maxWidth="Infinity" onAction="#handleSettings" styleClass="submenu-button" text="Pengaturan Aplikasi" />
                                        </VBox>
                                    </content>
                                </TitledPane>
                            </panes>
                        </Accordion>
                    </VBox>
                </content>
            </ScrollPane>
        </VBox>
    </left>

    <!-- Center Content Area -->
    <center>
        <StackPane fx:id="contentArea" style="-fx-background-color: #f4f6f9;">
            <!-- Default content will be loaded here via Controller -->
            <Label text="Loading Dashboard..." />
        </StackPane>
    </center>

    <!-- Bottom Status Bar -->
    <bottom>
        <HBox styleClass="status-bar" alignment="CENTER_LEFT">
            <padding>
                <Insets top="10" right="20" bottom="10" left="20"/>
            </padding>
            
            <Label fx:id="statusLabel" text="Status: Ready" styleClass="status-text"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Label text="SIJA Presensi Desktop v1.0.0" styleClass="version-text"/>
        </HBox>
    </bottom>

</BorderPane>
