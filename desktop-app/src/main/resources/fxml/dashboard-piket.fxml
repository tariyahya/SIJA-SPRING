<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.smk.presensi.desktop.controller.DashboardPiketController"
            prefWidth="1100" prefHeight="650">

    <top>
        <VBox spacing="8" style="-fx-padding: 20; -fx-background-color: #f5f5f5;">
            <Label text="Dashboard Guru Piket"
                   style="-fx-font-size: 22px; -fx-font-weight: bold;"/>
            <Label fx:id="subtitleLabel"
                   text="Ringkasan izin dan presensi harian"
                   style="-fx-font-size: 12px; -fx-text-fill: #666;"/>
        </VBox>
    </top>

    <center>
        <VBox spacing="15" style="-fx-padding: 20;">

            <!-- Summary cards -->
            <HBox spacing="15">
                <VBox spacing="5"
                      style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 4; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 4, 0, 0, 1);"
                      HBox.hgrow="ALWAYS">
                    <Label text="Izin Pending Hari Ini"
                           style="-fx-font-size: 14; -fx-font-weight: bold;"/>
                    <Label fx:id="pendingCountLabel"
                           text="0"
                           style="-fx-font-size: 28; -fx-font-weight: bold; -fx-text-fill: #f57c00;"/>
                </VBox>

                <VBox spacing="5"
                      style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 4; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 4, 0, 0, 1);"
                      HBox.hgrow="ALWAYS">
                    <Label text="Total Izin (Semua Status)"
                           style="-fx-font-size: 14; -fx-font-weight: bold;"/>
                    <Label fx:id="totalIzinLabel"
                           text="0"
                           style="-fx-font-size: 28; -fx-font-weight: bold; -fx-text-fill: #1976d2;"/>
                </VBox>

                <VBox spacing="5"
                      style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 4; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 4, 0, 0, 1);"
                      HBox.hgrow="ALWAYS">
                    <Label text="Tanggal"
                           style="-fx-font-size: 14; -fx-font-weight: bold;"/>
                    <Label fx:id="tanggalLabel"
                           text="-"
                           style="-fx-font-size: 18; -fx-font-weight: bold; -fx-text-fill: #333;"/>
                </VBox>
            </HBox>

            <!-- Pending izin table -->
            <VBox spacing="8"
                  style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 4; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.08), 4, 0, 0, 1);"
                  VBox.vgrow="ALWAYS">
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="Izin Pending Hari Ini"
                           style="-fx-font-size: 14; -fx-font-weight: bold;"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button fx:id="refreshButton"
                            text="Reload"
                            onAction="#handleRefresh"/>
                    <Button fx:id="openApprovalButton"
                            text="Buka Layar Approval"
                            onAction="#handleOpenApproval"/>
                </HBox>

                <TableView fx:id="izinTable" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="siswaColumn" text="Siswa" prefWidth="180"/>
                        <TableColumn fx:id="kelasColumn" text="Kelas" prefWidth="110"/>
                        <TableColumn fx:id="jurusanColumn" text="Jurusan" prefWidth="110"/>
                        <TableColumn fx:id="jenisColumn" text="Jenis" prefWidth="100"/>
                        <TableColumn fx:id="mulaiColumn" text="Mulai" prefWidth="110"/>
                        <TableColumn fx:id="selesaiColumn" text="Selesai" prefWidth="110"/>
                        <TableColumn fx:id="alasanColumn" text="Alasan" prefWidth="260"/>
                    </columns>
                </TableView>
            </VBox>
        </VBox>
    </center>

    <bottom>
        <HBox spacing="10" alignment="CENTER_LEFT"
              style="-fx-padding: 10 20; -fx-background-color: #f5f5f5;">
            <ProgressIndicator fx:id="loadingIndicator"
                               prefWidth="20" prefHeight="20"
                               visible="false"/>
            <Label fx:id="statusLabel" text="Ready"/>
        </HBox>
    </bottom>

</BorderPane>

